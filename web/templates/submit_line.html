<!DOCTYPE html>
<html>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
<link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">


<head>
<meta charset="UTF-8">
<title>Let's write a song together!</title>
</head>

<body class="center">
<a href="https://www.oneinanarmy.org/" target="_blank"><img src="../static/images/oiaa-logo_purwht.png" style="width:135px;height:auto;border:0;"" title="One in an Army" alt="OIAA"></a>
<font size="5">&nbsp;&nbsp; presents</font>

<h1>Army's Promise</h1>
<h2>Let's write a song together!</h2><br>
Choose a verse in <a href="https://soundcloud.com/bangtan/firstjiminpresent">Jimin's Promise</a> and write new lyrics for it. <br><br>
We will approve your submission and <br>
then you can see your lyrics in a randomly generated<br>
ARMY's Promise song. <br>
<hr>
<iframe width="60%" height="130" scrolling="no" frameborder="no" allow="autoplay"
src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/551801490&color=%2355207d&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true">
</iframe>

<form action="/web/submit_line" method="POST">
    <div class="container">
        <div align="left" class="row">
                <div class="col align-self-start">
                    Select a verse to rewrite:<br>

                    <select name="line_type" onchange="changeOrginalLyrics(this)">
                        {% for choice in line_types %}
                            <option value="{{ choice }}">{{ choice }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div id="originalLyrics" class="col align-self-start">
                    Original Lyrics:<br>
                    {% for line in chorus_lines %}
                        {{line}}
                    {% endfor %}
                </div>
        </div>
        <div class="form-group">
            <label for="text"></label>
            <textarea name="text" class="form-control" id="exampleFormControlTextarea1" rows="3" placeholder="write your lyrics here"></textarea>
        </div>
    </div>

    <br>
    Social Media Handle:
    <select name="social_type">
        {% for choice in social_types %}
            <option value="{{ choice }}">{{ choice }}</option>
        {% endfor %}
    </select>
    <input name="social_id"><br>
</form>
</body>

</html>

<script type="text/javascript">
function changeOrginalLyrics(option) {
    var originalLyricsDiv = document.getElementById("originalLyrics")

    var originalLyrics = '';

    var originalLyricsArray;

    if (option.value == 'chorus') {
        originalLyricsArray = JSON.parse('{{ chorus_lines|tojson }}')
    }
    else if (option.value == 'pre-chorus') {
        originalLyricsArray = JSON.parse('{{ pre_chorus_lines|tojson }}')
    }
    else if (option.value == 'verse') {
        originalLyricsArray = JSON.parse('{{ verse_lines|tojson }}')
    }
    else if (option.value == 'bridge') {
        originalLyricsArray = JSON.parse('{{ bridge_lines|tojson }}')
    }

    originalLyricsArray.forEach(function(line) {
        originalLyrics += '<br>' + line
    });

    if (originalLyrics) {
        originalLyricsDiv.innerHTML = "Original Lyrics:" + originalLyrics
    }
}
</script>
